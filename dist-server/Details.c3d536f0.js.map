{"version":3,"sources":["../src/components/Carousel.js","../src/components/ErrorBoundary.js","../src/components/Modal.js","../src/components/Details.js"],"names":["Carousel","Component","active","event","setState","target","dataset","index","render","state","images","props","map","photo","handleIndexClick","ErrorBoundary","hasError","redirect","getDerivedStateFromError","componentDidCatch","error","info","console","setTimeout","children","Modal","modalRoot","document","getElementById","elRef","current","createElement","appendChild","removeChild","Details","loading","showModal","toggleModal","res","fetch","match","params","id","json","Object","assign","pets","window","open","animal","breed","city","description","name","themehook","backgroundColor","adopt","DetailsWithRouter","DetailsWithErrorBoundary"],"mappings":"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","file":"Details.c3d536f0.js","sourceRoot":"../server","sourcesContent":["import { Component } from \"react\";\n\nclass Carousel extends Component {\n  state = {\n    active: 0,\n  };\n\n  static defaultProps = {\n    images: [\"http://pets-images.dev-apis.com/pets/none.jpg\"],\n  };\n  handleIndexClick = (event) => {\n    this.setState({\n      active: +event.target.dataset.index,\n    });\n  };\n  render() {\n    const { active } = this.state;\n    const { images } = this.props;\n\n    return (\n      <div className=\"carousel\">\n        <img src={images[active]} alt=\"animal\" />\n        <div className=\"carousel-smaller\">\n          {images.map((photo, index) => (\n            // eslint-disable-next-line\n            <img\n              key={photo}\n              src={photo}\n              data-index={index} //line 13 event.target.dataset.index\n              onClick={this.handleIndexClick}\n              // onClick={this.handleIndexClick.bind(this)} \n              // when handleIndexClick is not an arrow funciton.\n              className={index === active ? \"active\" : \"\"}\n              alt=\"animal thumbnail\"\n            />\n          ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Carousel;\n","// mostly took this from the React docs\n\nimport { Component } from \"react\";\nimport { Link, Redirect } from \"react-router-dom\";\n\nclass ErrorBoundary extends Component {\n  state = { hasError: false, redirect: false };\n  static getDerivedStateFromError() {\n    return { hasError: true };\n  }\n  componentDidCatch(error, info) {\n    // I log this to Sentry, Azure Monitor, New Relic, TrackJS\n    console.error(\"ErrorBoundary caught an error\", error, info);\n    setTimeout(() => this.setState({ redirect: true }), 5000);\n  }\n  // componentDidUpdate() {\n  //   if (this.state.hasError) {\n  //     setTimeout(() => this.setState({ redirect: true }), 5000);\n  //   }\n  // }\n  render() {\n    if (this.state.redirect) {\n      return <Redirect to=\"/\" />;\n    } else if (this.state.hasError) {\n      return (\n        <h2>\n          This listing has an error.\n          <Link to=\"/\">Click here</Link> to go to home page.\n        </h2>\n      );\n    }\n    return this.props.children;\n  }\n}\nexport default ErrorBoundary;\n","import { useEffect, useRef } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nlet modalRoot;\n\nconst Modal = (props) => {\n  modalRoot = modalRoot ? modalRoot : document.getElementById(\"modal\");\n  const elRef = useRef(null);\n  if (!elRef.current) {\n    elRef.current = document.createElement(\"div\");\n  }\n\n  useEffect(() => {\n    modalRoot.appendChild(elRef.current);\n    return () => modalRoot.removeChild(elRef.current);\n  }, []);\n\n  return createPortal(<div>{props.children}</div>, elRef.current);\n};\n\nexport default Modal;\n","import { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport Carousel from \"./Carousel\";\nimport ErrorBoundary from \"./ErrorBoundary\";\nimport ThemeContext from \"./ThemeContext\";\nimport Modal from \"./Modal\";\n\nclass Details extends Component {\n  state = { loading: true, showModal: false };\n\n  onRequestClose = () => {\n    this.toggleModal;\n  };\n  componentDidMount = async () => {\n    const res = await fetch(\n      `http://pets-v2.dev-apis.com/pets?id=${this.props.match.params.id}`\n      // get id from App.js : line 22\n      // < Route path = \"/details/:id\" >\n    );\n    const json = await res.json();\n    this.setState(\n      Object.assign(\n        {\n          loading: false,\n        },\n        json.pets[0]\n      )\n    );\n    // this.setState({\n    //   loading: false,\n    //   breed: json.pets[0].breed,\n    //   name: json.pets[0].name,\n    //   animal: json.pets[0].animal,\n    //   city: json.pets[0].city,\n    //   state: json.pets[0].state\n    //   description: json.pets[0].description\n    // });\n  };\n  toggleModal = () => this.setState({ showModal: !this.state.showModal });\n\n  adopt = () => (window.open(\"http://bit.ly/pet-adopt\"), \"_blank\");\n  render() {\n    if (this.state.loading) {\n      return <h2>loading...</h2>;\n    }\n    const { animal, breed, city, state, description, name, images, showModal } =\n      this.state;\n\n    return (\n      <div className=\"details\">\n        <Carousel images={images} />\n        <div>\n          <h1>{name}</h1>\n          <h2>\n            {animal} - {breed} - {city}, {state}\n          </h2>\n          {/* <ThemeContext.Consumer /> only works in Class Component */}\n          <ThemeContext.Consumer>\n            {(\n              // [theme]\n              themehook\n            ) => (\n              <button\n                onClick={this.toggleModal}\n                style={{\n                  backgroundColor:\n                    // theme\n                    themehook[0],\n                }}\n              >\n                Adopt {name}\n              </button>\n            )}\n            {/* {(themehook) => {themehook[0]}} */}\n          </ThemeContext.Consumer>\n          <p>{description}</p>\n          {showModal ? (\n            <Modal>\n              <div>\n                <h1>Would you like to adopt {name}?</h1>\n                <div className=\"buttons\">\n                  <button onClick={this.adopt}>Yes</button>\n                  <button onClick={this.toggleModal}>No</button>\n                </div>\n              </div>\n            </Modal>\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n}\n\n// without ErrorBoundary\n// export default withRouter(Details);\n\nconst DetailsWithRouter = withRouter(Details);\n\nexport default function DetailsWithErrorBoundary() {\n  return (\n    <ErrorBoundary>\n      <DetailsWithRouter />\n    </ErrorBoundary>\n  );\n}\n"]}